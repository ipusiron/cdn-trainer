# CDN Trainer - セキュアなCDN構成を学べる体験型ツール

![GitHub Repo stars](https://img.shields.io/github/stars/ipusiron/cdn-trainer?style=social)
![GitHub forks](https://img.shields.io/github/forks/ipusiron/cdn-trainer?style=social)
![GitHub last commit](https://img.shields.io/github/last-commit/ipusiron/cdn-trainer)
![GitHub license](https://img.shields.io/github/license/ipusiron/cdn-trainer)

**Day026 - 生成AIで作るセキュリティツール100**

**CDN Trainer** は、CDN・WAF・オリジンサーバ構成の良し悪しを、構成を自分で選びながら体験的に学べるセキュリティ教育用Webツールです。

初学者でもチェックを入れて「診断する」だけで、攻撃の流れとブロック状況が視覚的に理解できます。

---

## 🔍 デモページ

👉 [https://ipusiron.github.io/cdn-trainer/](https://ipusiron.github.io/cdn-trainer/)

---

## 📸 スクリーンショット

>![3つの構成要素すべてを有効にした場合](assets/screenshot.png)
>
>*3つの構成要素すべてを有効にした場合*

---

## 🎯 主な機能

- ✅ **カスタム構成モード** - CDN / WAF / IP制限の有効・無効を自分で選択
- ✅ **アニメーション表示** - 攻撃の流れとブロック位置をSVGアニメーションで視覚化
- ✅ **セキュリティ評価** - 3項目でのスコア（0-3点）と「最高〜最低」のランク表示
- ✅ **診断コメント** - 構成の問題点と改善策をわかりやすく解説
- ✅ **8パターン一覧表** - トグルスイッチですべての組み合わせパターンを表示
- ✅ **ダークモード** - 明暗テーマの切り替えに対応（設定保存機能付き）
- ✅ **ヘルプ機能** - 用語解説や使い方を詳しく説明するモーダル
- ✅ **レスポンシブ対応** - スマートフォンでも快適に使用可能

---

## 🚀 セキュリティ学習のポイント

本ツールでは、以下の実践的なセキュリティ知識を学べます。

---
### 🔒 多層防御の重要性
- 単一の防御策に依存することの危険性
- CDN、WAF、IP制限を組み合わせた包括的防御

---
### ⚠️ CDNバイパス攻撃
- CDNを迂回してオリジンサーバーに直接攻撃する手法
- IP制限の重要性と実装方法

---
### 🛡️ アプリケーション層防御
- WAFによるSQL injection、XSS等の防御
- シグネチャベース検知の仕組み
---

## 🚀 セキュリティ学習のポイント

本ツールでは、以下の実践的なセキュリティ知識を学べます。

---
### 🔒 多層防御の重要性
- 単一の防御策に依存することの危険性
- CDN、WAF、IP制限を組み合わせた包括的防御

---
### ⚠️ CDNバイパス攻撃
- CDNを迂回してオリジンサーバーに直接攻撃する手法
- IP制限の重要性と実装方法

---
### 🛡️ アプリケーション層防御
- WAFによるSQL injection、XSS等の防御
- シグネチャベース検知の仕組み

---

### 💡 評価方式について

構成の良し悪しは、以下の3要素で判断されます：

- **CDN**の有効／無効 - 攻撃の分散と第一の防御線
- **WAF**の有効／無効 - アプリケーション層攻撃の検知・防御
- **IP制限**の有無 - オリジンサーバーへの直接アクセス制限

それぞれ1点で最大3点となり、「セキュリティ評価：n/3（CDN・WAF・IP制限の3項目で判定）」として表示されます。  
また、点数に応じて「最高」「高い」「低い」「最低」のセキュリティレベルが表示され、アニメーションで攻撃がどこでブロックされるかを視覚的に確認できます。

---

## 🎮 本ツールの使い方

1. **構成選択** - CDN、WAF、IP制限のチェックボックスを選択
2. **診断実行** - 「構成を診断する」ボタンをクリック
3. **結果確認** - アニメーション付き構成図と診断コメントで結果を確認
4. **一覧表示** - トグルスイッチで8パターンすべての評価一覧を表示
5. **ヘルプ参照** - ❓ボタンで詳細なヘルプを表示

---

## 🎓 本ツールを使った効果的な学習法

このツールでは、以下のように「構成を変えて→結果を見る」というサイクルにより、  
自然にセキュリティ構成の効果と重要性を理解できます。

---

### 💡 学習の流れ

1. **構成を変更（CDN / WAF / IP制限）**
2. **アニメーションで攻撃の流れを可視化**
3. **診断コメントでリスクを確認**
4. **8パターン一覧で比較学習**
5. **ヘルプで知識を補完**

---

### 📘 学習効果

- 攻撃者視点での「構成の甘さ」を体験できる  
- なぜCDNだけでは不十分か？が直感的にわかる  
- 安全な構成に導く思考力が身につく

---

## 🛡 CDNと周辺セキュリティの概要

**CDN（Content Delivery Network）** は、世界中のノードを通じてコンテンツを分散配信する仕組みであり、その役割は「高速化」だけでなく「防御の第一線」としても非常に重要です。

- **CDNの防御効果**  
  クライアントからのリクエストを受け止め、オリジンサーバーへの直接的な接続を遮断  
  → DDoS攻撃の緩和、帯域の節約、キャッシュによる負荷軽減

- **WAFの補完的役割**  
  CDNが防ぐのはネットワークレベルの攻撃。WAF（Web Application Firewall）は  
  アプリケーション層での攻撃（XSSやSQLi）を防御

- **IP制限の必要性**  
  CDNやWAFをすり抜けた「バイパス攻撃」からOriginを守る最後の砦

---

## 🔒 実践的なセキュリティ構成オプション

本ツールでは基本的な3要素（CDN/WAF/IP制限）を扱いますが、実際の運用では以下のような高度な構成オプションがセキュリティ向上に有効です。

> 💡 **学習のポイント**: 本ツールで基本概念を理解した後は、実際のCDNプロバイダー（Cloudflare、AWS CloudFront、Azure CDNなど）のドキュメントで、これらの高度機能の具体的な設定方法を学習することを推奨します。

---
### 🌐 CDN高度機能

#### **DDoS Protection（DDoS攻撃対策）**
- **L3/L4攻撃対策**: ネットワーク層・トランスポート層での大量パケット攻撃を自動緩和
- **L7攻撃対策**: アプリケーション層での巧妙な攻撃パターンを検知・ブロック
- **Adaptive Protection**: AIによる異常トラフィック検知と動的防御

#### **地理的ブロッキング（Geo-blocking）**
- **国別制限**: 特定の国・地域からのアクセスを制限
- **リージョン最適化**: サービス地域に応じた配信最適化
- **IP reputation**: 既知の悪意あるIPレンジの自動ブロック

#### **Rate Limiting（レート制限）**
- **リクエスト制限**: 単位時間あたりのリクエスト数制限
- **接続制限**: 同一IPからの接続数制限
- **API保護**: エンドポイント別の細かいレート制御

---
### 🛡️ WAF高度機能

#### **OWASP Top 10対応**
- **Injection攻撃**: SQLインジェクション、コマンドインジェクション対策
- **XSS対策**: Cross-Site Scripting攻撃の検知・防御
- **CSRF対策**: Cross-Site Request Forgery攻撃の防止

#### **機械学習ベース検知**
- **異常検知**: 通常トラフィックパターンからの逸脱を検知
- **ゼロデイ対策**: 未知の攻撃パターンの早期発見
- **偽陽性削減**: 学習によるルール精度向上

#### **カスタムルール**
- **アプリ固有対策**: 独自アプリケーションに特化したセキュリティルール
- **ビジネスロジック保護**: 業務処理の不正利用防止
- **データ漏洩防止**: 機密情報の意図しない送信検知

---
### 🔐 高度なアクセス制御

#### **Bot Management（Bot対策）**
- **良性Bot許可**: 検索エンジンクローラーなどの許可リスト
- **悪性Bot検知**: スクレイピング、クリック詐欺Botの検出
- **チャレンジ機能**: CAPTCHA、JavaScript Challenge等による人間判定

#### **SSL/TLS強化**
- **HSTS**: HTTP Strict Transport Security による強制HTTPS化
- **Certificate Pinning**: 証明書固定による中間者攻撃対策
- **Perfect Forward Secrecy**: 秘密鍵漏洩時の過去通信保護

#### **Advanced IP制限**
- **Dynamic IP Control**: 攻撃検知時の自動IP遮断
- **CDN Edge IP**: CDNエッジサーバーIPのみ許可する厳密制御
- **Maintenance Mode**: メンテナンス時の管理者IP限定アクセス

---
### 📊 監視・分析機能

#### **リアルタイム監視**
- **攻撃ダッシュボード**: 攻撃状況のリアルタイム可視化
- **アラート機能**: 閾値超過時の即座通知
- **インシデント対応**: 攻撃検知時の自動対応フロー

#### **ログ分析**
- **攻撃パターン分析**: 攻撃手法や頻度の傾向分析
- **False Positive管理**: 誤検知パターンの特定と除外
- **コンプライアンス**: セキュリティ監査に必要なログ保管

#### **レポート機能**
- **月次セキュリティレポート**: 攻撃統計と対策効果の定量評価
- **SLA監視**: 可用性・パフォーマンス指標の継続監視
- **ベンチマーク**: 業界標準との比較分析

---
### 💡 実装時の考慮事項

#### **段階的導入**
1. **Phase 1**: 基本構成（CDN + 基本WAF + IP制限）
2. **Phase 2**: 高度防御（DDoS Protection + Bot Management）
3. **Phase 3**: AI機能（機械学習検知 + 異常検知）
4. **Phase 4**: 統合管理（SIEM連携 + 自動対応）

#### **コスト vs セキュリティ**
- **Small Business**: CDN + 基本WAF （月額 $50-200）
- **Medium Enterprise**: 上記 + DDoS Protection + Bot Management （月額 $500-2000）
- **Large Enterprise**: フル機能 + 24/7サポート （月額 $5000+）

#### **パフォーマンス影響**
- **CDN**: レスポンス時間 30-70% 改善
- **WAF**: 1-5ms のレイテンシ追加
- **Bot Management**: 2-10ms のレイテンシ追加（チャレンジ時除く）

---

## 🔧 技術仕様

- **フロントエンド**: Vanilla JavaScript (ES6+)
- **スタイリング**: CSS3 (Flexbox, Grid, Animation)
- **図表**: SVG (動的生成・アニメーション)
- **レスポンシブ**: CSS Media Queries
- **データ保存**: localStorage (ダークモード設定)

---

## 📁 ファイル構成

```
cdn-trainer/
├── index.html ......... メインUI・モーダル・ツールチップ
├── style.css .......... スタイル定義・ダークモード・レスポンシブ・ツールチップ
├── script.js .......... 診断ロジック・アニメーション・モーダル制御
├── assets/
│   └── screenshot.png . アプリケーションのスクリーンショット
├── README.md .......... プロジェクト説明・高度な構成オプション解説
├── LICENSE ............ MITライセンス
└── CLAUDE.md .......... 開発者向けガイド
```

---

## 🗺 今後の学習ロードマップ

| レベル | 学習内容例 |
|--------|------------|
| 初級   | CDN/WAF/IP制限の仕組み、構成の善し悪しを理解 |
| 中級   | CDNバイパスの実例と対策、WAFの設定・運用方法 |
| 上級   | ログ分析・脅威検知・攻撃シナリオ設計とテスト |

> 💡 本ツールは「構成判断力の土台」を築くことに特化しています。  
> より実践的な防御技術や攻撃手法については、今後のツール群や外部教材でステップアップしていきましょう。

---

## 🧾 用語集

| 用語 | 解説 |
|------|------|
| **CDN（Content Delivery Network）** | Webサーバーの代わりに、世界中の中継サーバーがコンテンツを届けてくれる仕組み。攻撃を防ぐ盾としても使える。 |
| **WAF（Web Application Firewall）** | Webアプリへの不正アクセス（例：SQLインジェクション）を検知・防御する仕組み。CDNとセットで導入されることが多い。 |
| **オリジンサーバー（Origin Server）** | あなたの本来のWebサーバー。CDNの裏側にある本体。攻撃から守るべき対象。 |
| **IP制限** | 特定のIPアドレス（例：CDN経由のアクセス）のみに通信を許可することで、直接の攻撃を防ぐ技術。 |
| **CDNバイパス** | CDNを通さずに直接オリジンサーバーへアクセスされてしまう状態。構成ミスで起こりやすく危険。 |
| **構成図** | ネットワークの流れや防御の位置関係を図で表したもの。視覚的に理解しやすい。 |

---

## 📄 ライセンス

MIT License - 詳細は[LICENSE](LICENSE)をご覧ください。

---

## 🛠 このツールについて

本ツールは、「生成AIで作るセキュリティツール100」プロジェクトの一環として開発されました。
このプロジェクトでは、AIの支援を活用しながら、セキュリティに関連するさまざまなツールを100日間にわたり制作・公開していく取り組みを行っています。

プロジェクトの詳細や他のツールについては、以下のページをご覧ください。

🔗 [https://akademeia.info/?page_id=42163](https://akademeia.info/?page_id=42163)
